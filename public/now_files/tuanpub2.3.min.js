(function(b){if(window.tuan800ued){return}var c={modules:{}},a={version:"$Revision: 458 $"};a.List=[];a.opts={};a.exopts={};a.addModule=function(e,d){if(c.modules[e]){d=b.extend(c.modules[e],d)}c.modules[e]=d;if(c.modules[e]&&c.modules[e].Init){c.modules[e].Init(a.opts)}};a.getModule=function(d){return c.modules[d]};a.Init=function(d){b.extend(this.opts,d);return};b(document).ready(function(){for(var d in c.modules){if(c.modules[d]&&c.modules[d].OnLoad){c.modules[d].OnLoad(a.opts)}}});window.tuanpub=window.tuan800ued=a})(jQuery);(function(a){Array.prototype.del=function(b){if(b<0){return this}else{return this.slice(0,b).concat(this.slice(b+1,this.length))}};a.extend({arrTojson:function(d){var c="",e=d[0];if(a.type(d)!="array"){return{}}switch(e){case"s":var b=["","rating","city","tn","pp","links"];a.each(d,function(g,f){if(g==0){return true}if(b[g]=="pp"){if(f=="yes"){f=""}else{f=" nopp"}}if(b[g]=="links"){if(f&&f!=""){f=' <a href=\\"'+f+'\\" target=\\"_blank\\">进入</a>'}else{f=""}}c+='"'+b[g]+'":"'+f+'",'});break;case"d":var b=["","id","endDay","startDay","status"];a.each(d,function(g,f){if(g==0){return true}c+='"'+b[g]+'":"'+f+'",'});break}c=c.length>0?c.substr(0,c.length-1):"";return a.parseJSON("{"+c+"}")},rdStr:function(d,h){var g=8;var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";d=d||g;d=d<1?g:d;d=d>f.length?g:d;var e="";for(var c=0;c<d;c++){var b=Math.floor(Math.random()*f.length);e+=f.substring(b,b+1)}if(h){e+=new Date().getTime()}return e},getTime:{now:function(){return(new Date()).getTime()},getDateStr:function(f,x){var d=function(h){if(a.type(h)!=="number"){return}if(h==3){return" "+v+":"+q+":"+l}if(h==4){return" "+e+":"+w}if(h==6){return" "+e+":"+w+":"+r}return""};if(!x){if(f<10){x=f;f=new Date()}}var f=f||new Date();var i="-",c="",k=new Date(f);k.setTime(f);var b=k.getFullYear(),j=b+"".substring(2,4),g=k.getMonth()+1,n=k.getDate(),v=k.getHours(),q=k.getMinutes(),l=k.getSeconds();var o=g<10?"0"+g:g,u=n<10?"0"+n:n,e=v<10?"0"+v:v,w=q<10?"0"+q:q,r=l<10?"0"+l:l;var y={Y:b,YY:j,M:g,MM:o,D:n,DD:u,h:v,hh:e,m:q,mm:w,s:l,ss:r};switch(a.type(x)){case"string":i=x;break;case"number":c=d(x);break;case"object":if(x.tpl){p=a.ParseTpl?a.ParseTpl(x.tpl,y):y;return p;break}i=x.rs?x.rs:i;c=d(x.HHMMSS?x.HHMMSS:c);break}var p=b+i+g+i+n+c;return p},friendly:function(g){if(a.type(g)!="number"){return""}var j="",v=1000,o=v*60,e=o*60,u=+new Date,c=new Date(),b=c.getFullYear(),p=c.getMonth(),h=c.getDate(),f=new Date(b,p,h),n=f.getTime(),k=u-g;if(k<0){j=""}else{if(k<=o*5){j="刚刚"}else{if(k<e){var q=Math.floor(k/o);j=q+"分钟前"}else{if(k<u-n){var i=new Date(g),d=i.getHours(),s=i.getMinutes();if(d<10){d="0"+d}if(s<10){s="0"+s}j="今日 "+d+":"+s}else{var i=new Date(g),l=i.getMonth()+1,r=i.getDate(),d=i.getHours(),s=i.getMinutes();if(l<10){l="0"+l}if(r<10){r="0"+r}if(d<10){d="0"+d}if(s<10){s="0"+s}j=l+"月"+r+"日 "+d+":"+s}}}}return j},countDown:function(){if(parseInt(arguments[0])>0){var b=this,c=false;times=Math.floor((arguments[0]-(arguments[1]||(new Date()).getTime()))/1000);if(times<0){c=true;times=times<0?-times:times}return{t:c,s:times%60,ss:times%60<10?"0"+times%60:times%60,m:Math.floor(times/60)%60,mm:Math.floor(times/60)%60<10?"0"+Math.floor(times/60)%60:Math.floor(times/60)%60,h:Math.floor(times/3600)%24,hh:Math.floor(times/3600)%24<10?"0"+Math.floor(times/3600)%24:Math.floor(times/3600)%24,D:Math.floor(times/86400),DD:Math.floor(times/86400)<10?"0"+Math.floor(times/86400):Math.floor(times/86400)}}else{return{}}},countTimer:new Array()},getCss:function(c,e){var b=document.getElementsByTagName("head")[0],e=e||"utf-8";function d(f,h){var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");if(h){g.charset=h}g.setAttribute("href",f);b.appendChild(g)}if(typeof c==="string"){d(c,e)}else{if(a.isArray(c)){a.each(c,function(f){d(c[f],e)})}}}})})(jQuery);(function(a){a.Dialogs={DialogPosition:function(b){var b=b||{};var i=b.id||"diglog_wrapper";var l=a("#"+i);var d=a(window),f=a(document);var h=l.width();var c=l.height();var k=f.scrollTop();var g=parseInt(d.height()-c)/2+k;g=g>0?g:0;var e=parseInt(d.width()-h)/2;var j={top:g+"px",left:e+"px"};if(a.type(b.offset)=="object"){a.each(b.offset,function(o,m){j[o]=a.type(m)=="string"?m.indexOf("px")==-1?m+"px":m:m+"px"})}l.css(j)},DialogClose:function(f){var f=f||{},d=f.id||"diglog_wrapper",c=f.cls||"diglog-wrapper";var b=a("#"+d);var e=a(".dialog-overlay");var g=a.type(f.closebtn)=="boolean"&&f.closebtn==false?b.find("a .close").hide():b.find(f.closebtn?f.closebtn:"a .close");var i=f.closefun||new Function,h=f.parameter||[];g.bind("click",function(){try{i.apply(this,(h))}catch(j){}if(b.length!=0){b.remove()}if(f.closeAll){a(".diglog-wrapper,.dialog-overlay,"+c).remove()}if(e.length!==0){e.remove()}return false})},DialogMsg:function(b){var b=b||{},c='{{#close}}<div class="diginfo">{{#msg}}</div>{{#buttons}}';b.m=b.m||0;b.msg=b.msg||"";b.close=(a.type(b.close)=="boolean"?b.close:true)?'<a href="javascript:void(0)" title="关闭窗口"><span class="close"></span></a>':"";return a.ParseTpl(c,a.extend({},b))},DialogAutoClose:function(c){c=c||{};c.auto=a.type(c.auto)=="boolean"?c.auto:true;c.times=a.type(c.times)=="number"?c.times:5;var b=c.id||"diglog_wrapper";if(c.auto){window.clearTimeout(window.timeout);window.timeout=window.setTimeout(function(){a("#"+b).fadeOut("slow",function(){a.Dialogs.Dialogclose(c)})},c.times*1000)}},Dialogclose:function(c){var c=c||{},b=c.id||"diglog_wrapper";var g=c.closefun||new Function,f=c.parameter||[];try{g.apply(this,(f));a(".dialog-overlay").remove()}catch(d){}if(a("#"+b+" span.close").size>0){a("#"+b+" span.close").trigger("click")}else{if(a("#"+b).length!=0){a("#"+b).remove()}}return false},DialogOverlay:function(f){var f=f||{},d=f.id||"diglog_wrapper";f.overlay=a.type(f.overlay)==="boolean"?f.overlay:a.type(f.overlay)==="object"?f.overlay:false;if(f.overlay){var g=a(document).height();var e={width:"100%",height:g,opacity:0.5,position:"absolute",overflow:"hidden",left:0,top:0,background:"#000"};var b=a('<div class="dialog-overlay"></div>');if(f.overlay.cls){b.addClass(f.overlay.cls)}if(f.overlay.css){e=a.extend(e,f.overlay.css)}b.css(e).css("z-index",a("#"+d).css("zIndex")-1);a(document.body).append(b);if(a.browser.name=="msie"&&a.browser.version=="6.0"){var c=a('<iframe frameborder="0"></iframe>');c.css({width:"100%",visibility:"inherit",height:g,position:"absolute",overflow:"hidden",left:0,top:0}).css("z-index",a("#"+d).css("zIndex")-2);b.append(c)}}},Dialog:function(b){var c=tuanpub.opts;var d=a(document.body);var b=b||{},i=b.id||"diglog_wrapper",k=b.cls||"diglog-wrapper";var l='<div id="'+i+'" class="'+k+'"></div>';var j=b.openfun||new Function,h=b.parameter||[];if(a("#"+i).length>0){a("#"+i).remove()}a(l).html(this.DialogMsg(b)).appendTo(d);if(!b.overlay&&a.browser.name=="msie"&&a.browser.version=="6.0"){var f=a('<iframe frameborder="0"></iframe>');f.css({width:"100%",visibility:"inherit",height:a("#"+i).find(".diginfo").height()-10,position:"absolute",overflow:"hidden",left:0,top:0,"z-index":-1}).prependTo(a("#"+i))}(b.btns&&a.type(b.btns)=="object"?(function(m){var e=false,n=m('<div class="digsbtns"></div>');m.each(b.btns,function(){return !(e=true)});if(e){m.each(b.btns,function(p,o){var q=m('<button type="button"></button>').text(p).click(function(){o.apply(this,h)}).appendTo(n)})}n.appendTo(m("#"+i).find(".diginfo"))})(jQuery):"");this.DialogOverlay(b);this.DialogPosition(b);this.DialogAutoClose(b);this.DialogClose(b);try{j.apply(this,(h))}catch(g){}return a(i)}}})(jQuery);(function(a){a.fn.pageList=function(){var C=this;var f=arguments,b=f[0]||{totalNumber:3,pageNum:1,pageSize:10,viewNum:5};var A=b.totalNumber,D=b.pageNum,x=b.pageSize;var r="",t="",g="",n="",F="",m="",o="",B=0;var j=0,h=0,e=0,c=0,l="",k="",G="",E="",z="",w="",n="";var q=typeof(b.viewNum)=="undefined"?10:b.viewNum;r=parseInt(A%x)>0?parseInt(A/x)+1:parseInt(A/x);t=parseInt(A%x);nPages=D>1?(D-1)*x+1:1;nPagee=r-D>0?D*x:A;B=parseInt(Math.round(r/q));o=q;var v=1;var s='<a href="javascript:void(0)" info="1">1</a>';var d='<a href="javascript:void(0)" info="'+r+'">'+r+"</a>";if(r<q){for(var y=1;y<=r;y++){if(y==D){n+="<span>"+y+"</span>"}else{n+='<a href="javascript:void(0)" info="'+y+'">'+y+"</a>"}}}else{if(D<=1){for(var y=1;y<=3;y++){if(y==D){n+="<span>"+y+"</span>"}else{n+='<a href="javascript:void(0)" info="'+y+'">'+y+"</a>"}}n=n+'<span class="dd">...</span>'+d}else{if(r-D<=1){for(var y=r-3;y<=r;y++){if(y==D){n+="<span>"+y+"</span>"}else{n+='<a href="javascript:void(0)" info="'+y+'">'+y+"</a>"}}n=s+'<span class="dd">...</span>'+n}else{j=D-1;h=D-2;e=D+1;c=D+2;l=j<=1?"":'<a href="javascript:void(0)" info="'+j+'">'+j+"</a>";k=h<=1?"":'<a href="javascript:void(0)" info="'+h+'">'+h+"</a>";G=e>=r?"":'<a href="javascript:void(0)" info="'+e+'">'+e+"</a>";E=c>=r?"":'<a href="javascript:void(0)" info="'+c+'">'+c+"</a>";z=h>1?'<span class="dd">...</span>':"";w=r-c>1?'<span class="dd">...</span>':"";tpages=D==1||D==r?"":"<span>"+D+"</span>";n=s+z+l+tpages+G+w+d}}}var u=new a.Buffers();if(r-D>0&&D==1){F=D+1;u.append('<span class="selected">上页</span> '+n+' <a href="javascript:void(0)" info="'+F+'">下页</a>')}else{if(r-D>0&&D>1){F=D+1;m=D-1;u.append('<a href="javascript:void(0)" info="'+m+'">上页</a> '+n+' <a href="javascript:void(0)" info="'+F+'">下页 </a>')}else{if(r-D==0&&r>1){m=D-1;u.append('<a href="javascript:void(0)" info="'+m+'">上页</a> '+n+' <span class="selected">下页</span>&nbsp;')}else{if(r-D==0&&r<=1){m=D-1;u.append('<span class="selected">上页</span> '+n+' <span class="selected">下页</span>&nbsp;')}}}}if(C.size()>0){C.empty().append(u.toString())}else{return u.toString()||""}}})(jQuery);